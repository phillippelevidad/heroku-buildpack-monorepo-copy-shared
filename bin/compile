#!/bin/bash
# Heroku buildpack compile script
# This buildpack copies the shared folder into frontend/apps/app before
# the monorepo buildpack runs, so it gets included when the app is copied to root

set -e

# Get the buildpack's bin directory
BIN_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Note: BUILD_DIR will be auto-detected by prepare-shared script
# by searching up the directory tree for the repository root

# Source the prepare-shared script if it exists
if [ -f "$BIN_DIR/prepare-shared" ]; then
  source "$BIN_DIR/prepare-shared"
else
  echo "       WARNING: prepare-shared script not found in $BIN_DIR"
  echo "       Make sure bin/prepare-shared exists in your buildpack"
fi

# Exit successfully - this buildpack just prepares the shared folder
# The monorepo buildpack will handle the actual app copying
